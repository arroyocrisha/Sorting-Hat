<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>The Sorting Hat</title>

<style>
/* GLOBAL */
body {
  margin: 0;
  font-family: "Georgia", serif;
  background: url("https://images.unsplash.com/photo-1524995997946-a1c2e315a42f") center/cover fixed;
  color: #f3f3f3;
  overflow-x: hidden;
}

.overlay {
  background: rgba(0,0,0,0.88);
  min-height: 100vh;
  padding: 40px;
}

/* QUIZ */
#quizPage {
  display: block;
}

h1 {
  text-align: center;
  letter-spacing: 4px;
}

#whisper {
  text-align: center;
  font-style: italic;
  opacity: 0.6;
  animation: whisper 4s infinite;
}

@keyframes whisper {
  0% {opacity:0.3;}
  50% {opacity:0.8;}
  100% {opacity:0.3;}
}

.question {
  max-width: 760px;
  margin: 45px auto;
  padding: 25px;
  background: rgba(20,20,20,0.9);
  border-radius: 10px;
  animation: fadeIn 1.8s ease;
}

@keyframes fadeIn {
  from {opacity:0; transform: translateY(30px);}
  to {opacity:1; transform: translateY(0);}
}

.options label {
  display: block;
  margin: 12px 0;
  cursor: pointer;
  transition: color 0.3s;
}

.options label:hover {
  color: #c7b6ff;
}

button {
  display: block;
  margin: 70px auto;
  padding: 16px 40px;
  font-size: 18px;
  background: #5e4b8b;
  border: none;
  color: white;
  border-radius: 8px;
  cursor: pointer;
}

button:hover {
  background: #46356e;
}

/* THINKING SCREEN */
#thinking {
  display: none;
  text-align: center;
  font-size: 22px;
  animation: fadeIn 2s ease;
}

/* RESULT PAGE */
#resultPage {
  display: none;
  text-align: center;
  animation: fadeIn 3s ease;
}

#seal {
  width: 280px;
  animation: reveal 3s ease;
}

@keyframes reveal {
  from {opacity:0; transform: scale(0.5);}
  to {opacity:1; transform: scale(1);}
}

.credit {
  margin-top: 60px;
  font-size: 14px;
  opacity: 0.6;
}
</style>
</head>

<body>
<div class="overlay">

<!-- QUIZ PAGE -->
<div id="quizPage">
  <h1>üß¢ THE SORTING HAT</h1>
  <p id="whisper">‚ÄúHmm‚Ä¶ difficult. Very difficult‚Ä¶‚Äù</p>
  <form id="quiz"></form>
  <button onclick="beginSorting()">Reveal My House</button>
</div>

<!-- THINKING -->
<div id="thinking">
  <p>The hat is searching your mind‚Ä¶</p>
  <p><em>Peering into the darkest corners of your heart‚Ä¶</em></p>
</div>

<!-- RESULT PAGE -->
<div id="resultPage">
  <img id="seal">
  <h1 id="houseName"></h1>
  <p id="houseDesc"></p>
  <div class="credit">by ccarroyo</div>
</div>

</div>

<script>
const questions = [
  "What are your thoughts on murder?",
  "Which truth frightens you most?",
  "If loyalty blocks your future, you would‚Ä¶",
  "Someone humiliates you publicly.",
  "Do you believe power corrupts?",
  "Which sin is most forgivable?",
  "Would you sacrifice one to save many?",
  "What is worse than death?",
  "How do you treat forbidden knowledge?",
  "When betrayed, you‚Ä¶",
  "Rules exist to be‚Ä¶",
  "What drives you in silence?",
  "Do you trust your instincts?",
  "What would you erase?",
  "How should history remember you?"
];

const answers = [
  ["Never justified","Context matters","Protect loved ones","Necessary"],
  ["Weakness","Ignorance","Loneliness","Irrelevance"],
  ["Choose loyalty","Balance both","Stay loyal","Choose future"],
  ["Confront","Outthink","Endure","Retaliate"],
  ["Always","Sometimes","Rarely","Never"],
  ["Pride","Curiosity","Fear","Ambition"],
  ["No","Depends","Yes","Without hesitation"],
  ["Failure","Ignorance","Loneliness","Irrelevance"],
  ["Reject it","Study it","Hide it","Use it"],
  ["Confront","Observe","Forgive","Plan revenge"],
  ["Broken","Necessary","Protective","Tools"],
  ["Honor","Knowledge","Love","Victory"],
  ["Yes","Mostly","Sometimes","Always"],
  ["My mistake","My doubt","My pain","My weakness"],
  ["Brave","Wise","Kind","Powerful"]
];

const houses = ["gryffindor","ravenclaw","hufflepuff","slytherin"];
const quiz = document.getElementById("quiz");

questions.forEach((q,i)=>{
  quiz.innerHTML += `
    <div class="question">
      <p><strong>${i+1}. ${q}</strong></p>
      <div class="options">
        ${answers[i].map((a,j)=>`
          <label>
            <input type="radio" name="q${i}" value="${houses[j]}"> ${a}
          </label>
        `).join("")}
      </div>
    </div>
  `;
});

function beginSorting() {
  const checked = document.querySelectorAll("input:checked");
  if (checked.length < 15) {
    alert("The Sorting Hat is not finished listening.");
    return;
  }

  document.getElementById("quizPage").style.display = "none";
  document.getElementById("thinking").style.display = "block";

  setTimeout(() => {
    sortHouse(checked);
  }, 3500);
}

function sortHouse(checked) {
  const score = {gryffindor:0,ravenclaw:0,hufflepuff:0,slytherin:0};
  checked.forEach(a => score[a.value]++);

  const house = Object.keys(score).reduce((a,b)=>score[a]>score[b]?a:b);

  const data = {
    gryffindor:{
      name:"ü¶Å GRYFFINDOR",
      img:"https://upload.wikimedia.org/wikipedia/commons/7/7e/Gryffindor_Crest.png",
      desc:"Courage burns louder than fear."
    },
    ravenclaw:{
      name:"ü¶Ö RAVENCLAW",
      img:"https://upload.wikimedia.org/wikipedia/commons/4/4e/Ravenclaw_Crest.png",
      desc:"Your mind sees what others miss."
    },
    hufflepuff:{
      name:"ü¶° HUFFLEPUFF",
      img:"https://upload.wikimedia.org/wikipedia/commons/6/62/Hufflepuff_Crest.png",
      desc:"Your strength is quiet but unbreakable."
    },
    slytherin:{
      name:"üêç SLYTHERIN",
      img:"https://upload.wikimedia.org/wikipedia/commons/1/1b/Slytherin_Crest.png",
      desc:"You do not fear desire‚Äîyou master it."
    }
  };

  document.getElementById("thinking").style.display = "none";
  document.getElementById("resultPage").style.display = "block";
  document.getElementById("seal").src = data[house].img;
  document.getElementById("houseName").innerText = data[house].name;
  document.getElementById("houseDesc").innerText = data[house].desc;
}
</script>

</body>
</html>
