<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>The Sorting Hat</title>

<style>
body {
  margin: 0;
  font-family: "Georgia", serif;
  background: url("https://images.unsplash.com/photo-1519681393784-d120267933ba") center/cover fixed;
  color: #eee;
}

.overlay {
  background: rgba(0,0,0,0.9);
  min-height: 100vh;
  padding: 40px;
}

/* HEADINGS */
h1 {
  text-align: center;
  letter-spacing: 4px;
}

#whisper {
  text-align: center;
  font-style: italic;
  opacity: 0.6;
  animation: whisper 4s infinite;
}

@keyframes whisper {
  0% {opacity:0.3;}
  50% {opacity:0.85;}
  100% {opacity:0.3;}
}

/* QUESTIONS */
.question {
  max-width: 850px;
  margin: 45px auto;
  padding: 25px;
  background: rgba(15,15,15,0.92);
  border-radius: 10px;
  animation: fadeIn 1.6s ease;
}

@keyframes fadeIn {
  from {opacity:0; transform: translateY(25px);}
  to {opacity:1; transform: translateY(0);}
}

.options label {
  display: block;
  margin: 14px 0;
  cursor: pointer;
  transition: color 0.3s;
}

.options label:hover {
  color: #c7b6ff;
}

/* BUTTON */
button {
  display: block;
  margin: 70px auto;
  padding: 16px 42px;
  font-size: 18px;
  background: #5b4a87;
  border: none;
  color: #fff;
  border-radius: 8px;
  cursor: pointer;
}

button:hover {
  background: #44346b;
}

/* THINKING */
#thinking {
  display: none;
  text-align: center;
  font-size: 22px;
  animation: fadeIn 2s ease;
}

/* RESULT */
#resultPage {
  display: none;
  text-align: center;
}

#seal {
  width: 300px;
  animation: reveal 3s ease;
}

@keyframes reveal {
  from {opacity:0; transform: scale(0.6);}
  to {opacity:1; transform: scale(1);}
}

.credit {
  margin-top: 60px;
  opacity: 0.6;
  font-size: 14px;
}
</style>
</head>

<body>
<div class="overlay">

<!-- QUIZ -->
<div id="quizPage">
  <h1>üß¢ THE SORTING HAT</h1>
  <p id="whisper">‚ÄúI see ambition‚Ä¶ fear‚Ä¶ and something far darker‚Ä¶‚Äù</p>
  <form id="quiz"></form>
  <button onclick="beginSorting()">Reveal My House</button>
</div>

<!-- THINKING -->
<div id="thinking">
  <p>The hat presses deeper‚Ä¶</p>
  <p><em>Peering into memories you pretend not to have‚Ä¶</em></p>
</div>

<!-- RESULT -->
<div id="resultPage">
  <img id="seal">
  <h1 id="houseName"></h1>
  <div class="credit">by ccarroyo</div>
</div>

</div>

<script>
const questions = [
  ["The Inheritance (Knowledge of Fate)",
    "Burn it immediately.",
    "Keep it and use it.",
    "Sell it or prevent the cause."],

  ["The Scapegoat (The Weight of One vs. Many)",
    "I refuse.",
    "I do it.",
    "I make them volunteer."],

  ["The Mirror (The Path Not Taken)",
    "Disgust.",
    "Jealousy.",
    "Curiosity."],

  ["The Silence (The Erasure of Truth)",
    "Personal peace.",
    "End the cycle.",
    "Silent guardian."],

  ["The Banquet (Social Warfare)",
    "Charm them.",
    "Intimidate them.",
    "Observe silently."],

  ["The Statue (Legacy vs. Reality)",
    "False Hero.",
    "Forgotten Savior.",
    "Expose the truth."],

  ["The Pedestal (Loyalty vs. Morality)",
    "Hide it.",
    "Call the police.",
    "Use as leverage."],

  ["The Bargain (Competence vs. Joy)",
    "Creative art.",
    "Politics & strategy.",
    "Combat mastery."],

  ["The Void (The Great Reset)",
    "Do not press it.",
    "Press it for mercy.",
    "Press it for curiosity."],

  ["The Secret (Identity)",
    "Be known.",
    "Be hidden.",
    "Be misunderstood."],

  ["The Animal (Nature of the Soul)",
    "Wolf.",
    "Serpent.",
    "Owl."],

  ["The Crown (Unpopular Rule)",
    "Take it.",
    "Decline it.",
    "Re-educate them."],

  ["The Debt (Self-Sacrifice)",
    "As many as it takes.",
    "None.",
    "Only the valuable."],

  ["The Ghost (Afterlife of Spite)",
    "Loved one.",
    "Enemy.",
    "Move on."],

  ["The Final Door (Judgment)",
    "Intentions.",
    "Results.",
    "My standards."]
];

// Rotating house mapping for balance
const mappings = [
  ["hufflepuff","slytherin","ravenclaw"],
  ["hufflepuff","gryffindor","slytherin"],
  ["gryffindor","hufflepuff","ravenclaw"],
  ["hufflepuff","gryffindor","slytherin"]
];

const quiz = document.getElementById("quiz");

questions.forEach((q,i)=>{
  const map = mappings[i % mappings.length];
  quiz.innerHTML += `
    <div class="question">
      <p><strong>${i+1}. ${q[0]}</strong></p>
      <div class="options">
        <label><input type="radio" name="q${i}" value="${map[0]}"> ${q[1]}</label>
        <label><input type="radio" name="q${i}" value="${map[1]}"> ${q[2]}</label>
        <label><input type="radio" name="q${i}" value="${map[2]}"> ${q[3]}</label>
      </div>
    </div>
  `;
});

function beginSorting() {
  const checked = document.querySelectorAll("input:checked");
  if (checked.length < 15) {
    alert("The hat is not finished with you.");
    return;
  }

  document.getElementById("quizPage").style.display = "none";
  document.getElementById("thinking").style.display = "block";

  setTimeout(() => sortHouse(checked), 3500);
}

function sortHouse(checked) {
  const score = {gryffindor:0,ravenclaw:0,hufflepuff:0,slytherin:0};
  checked.forEach(a => score[a.value]++);

  const house = Object.keys(score).reduce((a,b)=>score[a]>score[b]?a:b);

  const data = {
    gryffindor:{
      name:"GRYFFINDOR",
      img:"https://static.wikia.nocookie.net/harrypotter/images/7/7e/Gryffindor_ClearBG.png"
    },
    ravenclaw:{
      name:"RAVENCLAW",
      img:"https://static.wikia.nocookie.net/harrypotter/images/4/4e/Ravenclaw_ClearBG.png"
    },
    hufflepuff:{
      name:"HUFFLEPUFF",
      img:"https://static.wikia.nocookie.net/harrypotter/images/6/62/Hufflepuff_ClearBG.png"
    },
    slytherin:{
      name:"SLYTHERIN",
      img:"https://static.wikia.nocookie.net/harrypotter/images/1/1b/Slytherin_ClearBG.png"
    }
  };

  document.getElementById("thinking").style.display = "none";
  document.getElementById("resultPage").style.display = "block";
  document.getElementById("seal").src = data[house].img;
  document.getElementById("houseName").innerText = data[house].name;
}
</script>

</body>
</html>
